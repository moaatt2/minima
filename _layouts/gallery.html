---
layout: base
---


<div class="carousel-container" id="carousel-test">
    <div class="carousel-wrapper prevent-animation" style="transform: translateX(-100%);">
        <!-- Cloned last slide for smooth wraparound -->
        <div class="carousel-slide">
            <img src="/assets/images/posts/2024_06_02_japanese_8_in_2/japanese_8_in_2_flat.jpg" alt="Slide Image">
        </div>
        <!-- Original slides -->
        <div class="carousel-slide">
            <img src="/assets/images/posts/2024_06_16_japanese_12_in_2/japanese_12_in_2_flat.jpg" alt="Slide Image">
        </div>
        <div class="carousel-slide">
            <img src="/assets/images/posts/2024_06_09_japanese_6_in_1/japanese_6_in_1_flat.jpg" alt="Slide Image">
        </div>
        <div class="carousel-slide">
            <img src="/assets/images/posts/2024_06_02_japanese_8_in_2/japanese_8_in_2_flat.jpg" alt="Slide Image">
        </div>
        <!-- Cloned first slide for smooth wraparound -->
        <div class="carousel-slide">
            <img src="/assets/images/posts/2024_06_16_japanese_12_in_2/japanese_12_in_2_flat.jpg" alt="Slide Image">
        </div>
    </div>
    <a class="carousel-nav carousel-last" onclick="changeSlide('carousel-test', 'last')">&#10094;</a>
    <a class="carousel-nav carousel-next" onclick="changeSlide('carousel-test', 'next')">&#10095;</a>
</div>

<style>
    .carousel-container {
        position: relative;
        width: 100%;
        max-width: 600px; /* Adjust width as needed */
        height: 400px;    /* Set a fixed height for the carousel */
        margin: auto;
        overflow: hidden;
    }

    .carousel-wrapper {
        display: flex;
        height: 100%;
        width: 100%;
        transition: transform 0.5s ease;
    }

    .carousel-slide {
        min-width: 100%;
        height: 100%; /* Make each slide take full carousel height */
        box-sizing: border-box;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    .carousel-slide img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
    }

    .carousel-nav {
        cursor: pointer;
        position: absolute;
        top: 50%;
        padding: 16px;
        color: white;
        font-weight: bold;
        font-size: 18px;
        user-select: none;
        transform: translateY(-50%);
    }

    .carousel-last {
        left: 0;
    }

    .carousel-next {
        right: 0;
    }

    .carousel-last:hover, .carousel-next:hover {
        background-color: rgba(0, 0, 0, 0.8);
        text-decoration: none;
    }

    .prevent-animation {
        transition: none !important;
    }
</style>

<script>

    // Wait for the page to load and remove the lock on animations
    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
            let wrappers = document.getElementsByClassName("prevent-animation");
            Array.from(wrappers).forEach(element => {
                element.classList.remove("prevent-animation");
            });
        }, 1000);
    });

    // Slide change function
    function changeSlide(wrapperId, direction) {

        // Get the appropriate wrapper and slides
        let container = document.getElementById('carousel-test');
        let wrapper = container.getElementsByClassName('carousel-wrapper')[0];
        let slides = wrapper.getElementsByClassName('carousel-slide');
        let totalSlides = slides.length;

        // Disable buttons
        let nextButton = container.getElementsByClassName("carousel-next")[0];
        let lastButton = container.getElementsByClassName("carousel-last")[0];
        lastButton.setAttribute("onclick", "");
        nextButton.setAttribute("onclick", "");

        // Find current index
        let transform = wrapper.style.transform;
        let transformPercentage = transform.split("(")[1].split("%")[0];
        let currentIndex = Number(transformPercentage)/-100;

        // Increment or decrement index based on direction
        if (direction === 'next') {
            currentIndex++;
        } else {
            currentIndex--;
        }

        // Smooth slide transition
        wrapper.style.transition = 'transform 0.5s ease';
        wrapper.style.transform = `translateX(-${currentIndex * 100}%)`;

        // Wraparound logic with a delay to reset without transition
        wrapper.addEventListener('transitionend', () => {
            if (currentIndex === totalSlides - 1) {
                currentIndex = 1;
                wrapper.style.transition = 'none';
                wrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
            }
            if (currentIndex === 0) {
                currentIndex = totalSlides - 2;
                wrapper.style.transition = 'none';
                wrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
            }

            // enable buttons after animation finishes
            lastButton.setAttribute("onclick", `changeSlide('${wrapperId}', 'last')`);
            nextButton.setAttribute("onclick", `changeSlide('${wrapperId}', 'next')`);
        }, { once: true });
    }
</script>




<hr>

{% for post in site.posts %}
    {%- if post.image_path -%}

        <!-- Count Images -->
        {%- assign num_images = 0 -%}
        {%- for file in site.static_files -%}
            {%- if file.path contains post.image_path -%}
                {%- unless file.path contains '_step_' or file.path contains '_tutorial_' -%}
                    {%- assign num_images = num_images | plus:1 -%}
                {%- endunless -%}
            {%- endif -%}
        {%- endfor -%}

        <!-- List images for post if there is at least 1 image -->
        {%- if num_images > 1 -%}

            <div class="gallery-card">
                <div class="gallery-carousel">
                    {%- for file in site.static_files -%}
                        {%- if file.path contains post.image_path -%}
                            {%- unless file.path contains '_step_' or file.path contains '_tutorial_' -%}
                                <img src="{{ file.path }}">
                                <!-- Maybe parse the filepath to get a caption -->
                            {%- endunless -%}
                        {%- endif -%}
                    {%- endfor -%}
                </div>
 
                <div class="gallery-info">
                    <!-- Style this like the post layout without a picture -->
                    {{ post.title }}
                </div>
            </div>
            <br>

        {%- endif -%}

    {%- endif -%}
{% endfor %}
